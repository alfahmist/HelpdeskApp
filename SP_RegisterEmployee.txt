CREATE PROCEDURE [dbo].[SP_RegisterEmployee]

	@Name varchar(200),
	@Email varchar(200),
	@BirthDate Date,
	@Gender varchar(50),
	@PhoneNumber varchar(50),
	@Password varchar(100), 
	@RoleId int

AS
IF NOT EXISTS (SELECT * FROM TB_M_Employee)
BEGIN
	ALTER SEQUENCE SequenceEmployee RESTART WITH 1
END
BEGIN
	DECLARE @Nid varchar(50) = 'EMP' + FORMAT(NEXT VALUE FOR SequenceEmployee,'00')

    INSERT INTO TB_M_AccountEmployee VALUES (@Nid, @Password)

	INSERT INTO TB_M_Employee([ID], [Name],Email, BirthDate, Gender,Phone, RoleID ) VALUES (@Nid, @Name, @Email, @BirthDate,@Gender,@PhoneNumber, @RoleId)


END
