CREATE PROCEDURE [dbo].[SP_ResponsedTicket]

AS
BEGIN

	SELECT tic.Id AS 'TicketID',tic.[Name] AS 'Ticket Name', tic.EmployeeId AS 'Requestor', tic.CreatedDate AS 'Open Date', tic.[Description] AS 'Description', TMessage.[Subject] AS 'Ticket SUbject', TMessage.[Message] AS 'Ticket Message', emp.[Name] AS 'Respondence', tr.Solution , tr.ResponDate AS 'Responsed Date'
						
	FROM TB_T_Ticket as tic
	JOIN TB_T_TicketMessage AS TMessage ON TMessage.TicketId = tic.Id
	JOIN TB_T_TicketStatus AS ts ON ts.TicketId = tic.Id
	JOIN TB_T_TicketResponse AS tr ON tic.Id = tr.TicketId
	JOIN TB_M_Employee AS emp ON tr.EmployeeId = emp.Id
	WHERE ts.StatusId = 3;

END